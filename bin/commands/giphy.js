// Generated by CoffeeScript 1.12.0
(function() {
  define(["jquery", "arbiter"], function($, arbiter) {
    return function(command, args) {
      var replacedArgs, whitespaceRegex, xhr;
      if (command === "\\g") {
        whitespaceRegex = /\s+/;
        replacedArgs = args.replace(whitespaceRegex, "+");
        xhr = $.get("http://api.giphy.com/v1/gifs/random?tag=" + replacedArgs + "&api_key=dc6zaTOxFJmzC&limit=1");
        return xhr.done(function(data) {
          var text;
          text = "<video controls='' loop='' autoplay='' title='" + args + "' width='100%' src='" + data.data.image_mp4_url + "' class='responsive-video'></video>";
          return arbiter.publish("messages/send", {
            text: text,
            author: localStorage.displayName
          });
        });
      }
    };
  });

}).call(this);
